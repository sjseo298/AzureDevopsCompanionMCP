# =====================================================================
# ESTRUCTURA ORGANIZACIONAL DE SURA - DESCUBRIMIENTO SIMULADO
# =====================================================================
# Este archivo simula el resultado del descubrimiento automático
# que se habría generado al ejecutar el comando de discovery

discoverySession:
  timestamp: "2025-01-29T15:30:00Z"
  tool: "azure-devops-mcp-discovery"
  version: "1.0.0"
  duration: "00:05:23"
  organization: "SuraColombia"
  
organizationSummary:
  name: "Sura Colombia"
  url: "https://dev.azure.com/SuraColombia"
  totalProjects: 3
  totalTeams: 28
  totalWorkItemTypes: 6
  totalCustomFields: 18
  analysisConfidence: "HIGH"

# =====================================================================
# PROYECTOS DESCUBIERTOS
# =====================================================================
discoveredProjects:
  - projectId: "985807ad-7ff9-438d-849c-794c9bbc50f4"
    name: "Gerencia_Tecnologia"
    description: "Proyecto principal de tecnología"
    state: "wellFormed"
    visibility: "private"
    lastUpdateTime: "2025-01-15T14:22:00Z"
    
    # Equipos descubiertos mediante análisis de membresías
    teams:
      - id: "team-001"
        name: "do-asegur-arl"
        description: "Dominio Operativo - Aseguramiento ARL"
        memberCount: 12
        isDefaultTeam: false
        
      - id: "team-002"
        name: "do-asegur-plan_de_remediacion"
        description: "Dominio Operativo - Plan de Remediación"
        memberCount: 8
        isDefaultTeam: false
        
      - id: "team-003"
        name: "egv-aseguramiento-calidad"
        description: "EGV - Aseguramiento de Calidad"
        memberCount: 15
        isDefaultTeam: false
        
      - id: "team-004"
        name: "tech-desarrollo-backend"
        description: "Tecnología - Desarrollo Backend"
        memberCount: 18
        isDefaultTeam: false
        
      - id: "team-005"
        name: "tech-desarrollo-frontend"
        description: "Tecnología - Desarrollo Frontend"
        memberCount: 14
        isDefaultTeam: false
    
    # Análisis de estructura de áreas realizado via WIQL
    areaAnalysis:
      rootArea: "Gerencia_Tecnologia"
      maxDepth: 4
      totalAreas: 23
      areasWithWorkItems: 18
      
      patterns:
        - pattern: "{project}\\do-{domain}-{function}"
          frequency: 8
          examples: ["Gerencia_Tecnologia\\do-asegur-arl", "Gerencia_Tecnologia\\do-asegur-plan_de_remediacion"]
          
        - pattern: "{project}\\egv-{domain}-{function}"
          frequency: 5
          examples: ["Gerencia_Tecnologia\\egv-aseguramiento-calidad", "Gerencia_Tecnologia\\egv-qa-automation"]
          
        - pattern: "{project}\\tech-{domain}-{function}"
          frequency: 7
          examples: ["Gerencia_Tecnologia\\tech-desarrollo-backend", "Gerencia_Tecnologia\\tech-desarrollo-frontend"]
      
      detectedAreas:
        - "Gerencia_Tecnologia"
        - "Gerencia_Tecnologia\\do-asegur-arl"
        - "Gerencia_Tecnologia\\do-asegur-plan_de_remediacion"
        - "Gerencia_Tecnologia\\do-asegur-auditoria"
        - "Gerencia_Tecnologia\\egv-aseguramiento-calidad"
        - "Gerencia_Tecnologia\\egv-qa-automation"
        - "Gerencia_Tecnologia\\egv-security-testing"
        - "Gerencia_Tecnologia\\tech-desarrollo-backend"
        - "Gerencia_Tecnologia\\tech-desarrollo-frontend"
        - "Gerencia_Tecnologia\\tech-infraestructura-cloud"
        - "Gerencia_Tecnologia\\tech-infraestructura-devops"
    
    # Iteraciones descubiertas via Teams API
    iterationAnalysis:
      totalIterations: 24
      activeIterations: 4
      futureIterations: 8
      
      cadenceAnalysis:
        iterationLength: "2 weeks"
        totalSprints: 12
        sprintsPerQuarter: 6
        currentQuarter: "Q1-2025"
        
      iterationPattern: "Gerencia_Tecnologia\\{year}\\Q{quarter}\\Sprint {number}"
      examples:
        - "Gerencia_Tecnologia\\2025\\Q1\\Sprint 1"
        - "Gerencia_Tecnologia\\2025\\Q1\\Sprint 2"
        - "Gerencia_Tecnologia\\2025\\Q1\\Sprint 3"

  - projectId: "7a8b9c0d-1e2f-3456-789a-bcdef0123456"
    name: "Gerencia_Tecnologia_Egv_Aseguramiento"
    description: "Proyecto especializado en aseguramiento EGV"
    state: "wellFormed"
    visibility: "private"
    lastUpdateTime: "2025-01-10T16:45:00Z"
    
    teams:
      - id: "egv-team-001"
        name: "egv-qa-automation"
        description: "EGV - Automatización de Pruebas"
        memberCount: 10
        
      - id: "egv-team-002"
        name: "egv-qa-manual"
        description: "EGV - Pruebas Manuales"
        memberCount: 6
        
      - id: "egv-team-003"
        name: "egv-security-testing"
        description: "EGV - Pruebas de Seguridad"
        memberCount: 8

  - projectId: "fedcba98-7654-3210-fedc-ba9876543210"
    name: "Portafolios"
    description: "Gestión de portafolio de proyectos"
    state: "wellFormed"
    visibility: "private"
    lastUpdateTime: "2025-01-20T09:15:00Z"
    
    teams:
      - id: "port-team-001"
        name: "portfolio-management"
        description: "Gestión de Portafolio"
        memberCount: 5
        
      - id: "port-team-002"
        name: "portfolio-analysis"
        description: "Análisis de Portafolio"
        memberCount: 4

# =====================================================================
# TIPOS DE WORK ITEMS DESCUBIERTOS
# =====================================================================
workItemTypeAnalysis:
  totalTypesFound: 6
  customTypesCount: 4
  inheritedTypesCount: 2
  
  discoveredTypes:
    - name: "Historia"
      referenceName: "AgileSura.Historia"
      baseType: "Microsoft.VSTS.WorkItemTypes.UserStory"
      color: "339947"
      icon: "icon_book"
      isCustom: true
      isActive: true
      
      # Análisis de campos mediante Process Template API
      fieldAnalysis:
        totalFields: 47
        customFields: 12
        requiredFields: 8
        hiddenFields: 3
        
        customFieldsDetected:
          - referenceName: "Custom.TipoDeHistoria"
            name: "Tipo de Historia"
            type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
            isRequired: true
            allowedValues: ["Historia Funcional", "Historia de Infraestructura", "Historia de Configuración", "Historia de Seguridad", "Historia de Performance"]
            
          - referenceName: "Custom.9fcf5e7b-aac8-44a0-9476-653d3ea45e14"
            name: "ID de la solución en el APM"
            type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.String"
            isRequired: true
            
          - referenceName: "Custom.78e00118-cbf0-42f1-bee1-269ea2a2dba3"
            name: "La historia hace parte de una migración de datos"
            type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
            isRequired: true
            allowedValues: ["Si", "No"]
            defaultValue: "No"
            
          - referenceName: "Custom.Lahistoriacorrespondeauncumplimientoregulatorio"
            name: "La historia corresponde a un cumplimiento regulatorio"
            type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
            isRequired: true
            allowedValues: ["Si", "No"]
            defaultValue: "No"
            
          - referenceName: "Custom.5480ef11-38bf-4233-a94b-3fdd32107eb1"
            name: "La historia hace parte de un control automático o control de aplicación"
            type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
            isRequired: true
            allowedValues: ["Si", "No"]
            defaultValue: "No"
    
    - name: "Historia técnica"
      referenceName: "AgileSura.HistoriaTecnica"
      baseType: "Microsoft.VSTS.WorkItemTypes.UserStory"
      color: "FF9D00"
      icon: "icon_gear"
      isCustom: true
      isActive: true
      
      customFieldsDetected:
        - referenceName: "Custom.14858558-3edb-485a-9a52-a38c03c65c62"
          name: "Tipo de Historia Técnica"
          type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
          isRequired: true
          allowedValues: ["Refactoring", "Optimización", "Deuda Técnica", "Actualización Tecnológica", "Mejora de Arquitectura"]
    
    - name: "Tarea"
      referenceName: "AgileSura.Task"
      baseType: "Microsoft.VSTS.WorkItemTypes.Task"
      color: "009CCC"
      icon: "icon_list"
      isCustom: true
      isActive: true
      
      customFieldsDetected:
        - referenceName: "Custom.TipoDeTarea"
          name: "Tipo de Tarea"
          type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
          isRequired: true
          allowedValues: ["Desarrollo", "Testing", "Documentación", "Configuración", "Despliegue", "Análisis"]
    
    - name: "Subtarea"
      referenceName: "AgileSura.Subtask"
      baseType: "Microsoft.VSTS.WorkItemTypes.Task"
      color: "5DB2D6"
      icon: "icon_list"
      isCustom: true
      isActive: true
      
      customFieldsDetected:
        - referenceName: "Custom.TipoDeSubtarea"
          name: "Tipo de Subtarea"
          type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
          isRequired: true
          allowedValues: ["Implementación", "Pruebas Unitarias", "Pruebas Integración", "Code Review", "Documentación Técnica"]
    
    - name: "Bug"
      referenceName: "Microsoft.VSTS.WorkItemTypes.Bug"
      baseType: "Microsoft.VSTS.WorkItemTypes.Bug"
      color: "CC293D"
      icon: "icon_insect"
      isCustom: false
      isActive: true
      
      customFieldsDetected:
        - referenceName: "Custom.DatosDePrueba"
          name: "Datos de prueba"
          type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.String"
          isRequired: true
          
        - referenceName: "Custom.Bloqueante"
          name: "Bloqueante"
          type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.Boolean"
          isRequired: true
          defaultValue: false
          
        - referenceName: "Custom.NivelPrueba"
          name: "Nivel de prueba"
          type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
          isRequired: true
          allowedValues: ["Unitaria", "Integración", "Sistema", "Aceptación", "Regresión", "Performance"]
          
        - referenceName: "Custom.Origen"
          name: "Origen del bug"
          type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
          isRequired: true
          allowedValues: ["Desarrollo", "Testing", "Producción", "Cliente", "Monitoreo"]
          
        - referenceName: "Custom.EtapaDescubrimiento"
          name: "Etapa de descubrimiento"
          type: "Microsoft.TeamFoundation.WorkItemTracking.FieldTypes.PicklistString"
          isRequired: true
          allowedValues: ["Análisis", "Desarrollo", "Testing", "UAT", "Producción"]

# =====================================================================
# ANÁLISIS DE PATRONES ORGANIZACIONALES
# =====================================================================
organizationalPatterns:
  teamNaming:
    prefixAnalysis:
      - prefix: "do-"
        count: 15
        description: "Dominio Operativo"
        pattern: "do-{domain}-{function}"
        domains: ["asegur", "operaciones", "riesgos"]
        functions: ["arl", "plan_de_remediacion", "auditoria", "compliance"]
        
      - prefix: "egv-"
        count: 8
        description: "Entidad Gubernamental de Validación"
        pattern: "egv-{domain}-{function}"
        domains: ["qa", "security", "compliance"]
        functions: ["automation", "manual", "testing", "validation"]
        
      - prefix: "tech-"
        count: 12
        description: "Tecnología"
        pattern: "tech-{domain}-{function}"
        domains: ["desarrollo", "infraestructura", "arquitectura"]
        functions: ["backend", "frontend", "cloud", "devops", "apis"]
        
      - prefix: "port-"
        count: 3
        description: "Portafolio"
        pattern: "port-{function}-{area}"
        functions: ["management", "analysis", "strategy"]
  
  workItemHierarchy:
    commonHierarchies:
      - level1: "Feature"
        level2: "Historia"
        level3: "Tarea"
        level4: "Subtarea"
        frequency: "85%"
        
      - level1: "Epic"
        level2: "Historia técnica"
        level3: "Tarea"
        frequency: "60%"
        
      - standalone: "Bug"
        frequency: "95%"
        
    linkTypes:
      parentChild: "System.LinkTypes.Hierarchy"
      related: "System.LinkTypes.Related"
      dependency: "System.LinkTypes.Dependency"
      duplicate: "System.LinkTypes.Duplicate"
      tested: "Microsoft.VSTS.Common.TestedBy"

# =====================================================================
# REGLAS DE NEGOCIO DETECTADAS
# =====================================================================
businessRulesAnalysis:
  fieldValidation:
    detectedRules:
      - condition: "tipoHistoria == 'Historia de Seguridad'"
        then: "cumplimientoRegulatorio = 'Si'"
        confidence: "HIGH"
        
      - condition: "migracionDatos == 'Si'"
        then: "controlAutomatico = 'Si'"
        confidence: "MEDIUM"
        
      - condition: "bloqueante == true"
        then: "priority <= 2"
        confidence: "HIGH"
        
      - condition: "origen == 'Producción'"
        then: "etapaDescubrimiento == 'Producción'"
        confidence: "HIGH"
  
  workflowRules:
    stateTransitions:
      Historia:
        - from: "New"
          to: "Active"
          condition: "Campos obligatorios completos"
          
        - from: "Active"
          to: "Resolved"
          condition: "Criterios aceptación validados"
          
        - from: "Resolved"
          to: "Closed"
          condition: "Aprobación stakeholder"
      
      Bug:
        - from: "New"
          to: "Active"
          condition: "Asignado y triaged"
          
        - from: "Active"
          to: "Resolved"
          condition: "Fix implementado"
          
        - from: "Resolved"
          to: "Closed"
          condition: "Testing completo"

# =====================================================================
# RECOMENDACIONES PARA GENERALIZACIÓN
# =====================================================================
generalizationRecommendations:
  immediateActions:
    - action: "Extraer configuración hardcodeada"
      priority: "HIGH"
      description: "Mover campos específicos de Sura a archivos de configuración"
      
    - action: "Crear servicio de configuración organizacional"
      priority: "HIGH"
      description: "Implementar carga dinámica de configuración"
      
    - action: "Parameterizar manejadores de campos"
      priority: "MEDIUM"
      description: "Hacer genéricos los manejadores específicos de Sura"
  
  configurationFiles:
    suggested:
      - "config/organization-config.yml"
      - "config/discovered-organization.yml"
      - "config/field-mappings.yml"
      - "config/business-rules.yml"
      
  codeRefactoring:
    filesToRefactor:
      - "CreateWorkItemTool.java"
      - "SuraWorkItemFieldsHandler.java"
      - "HelpTool.java"
      - "ConsultaProyectosPertenenciaPrompt.java"
      - "BuscarWorkItemPrompt.java"
    
    newFilesToCreate:
      - "OrganizationConfigService.java"
      - "GenericWorkItemFieldsHandler.java"
      - "OrganizationDiscoveryService.java"
      - "GenericHelpTool.java"

discoveryCompletionStatus: "SUCCESS"
nextSteps:
  - "Review discovered configuration files"
  - "Validate field mappings accuracy"
  - "Implement generic configuration loader"
  - "Test with different organization structures"
